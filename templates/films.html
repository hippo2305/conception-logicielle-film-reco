<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>MovieReco - Films</title>
</head>
<body>
  <h1>Liste des films</h1>

  <p>
    <a href="/">Accueil</a> |
    <a href="/favorites">Mes favoris</a>
  </p>

  {% if films and films|length > 0 %}
    <ul>
      {% for film in films %}
        <li>
          <b>{{ film["titre"] }}</b>
          {% if film["annee"] %} ({{ film["annee"] }}){% endif %}
          {% if film["realisateur"] %} — {{ film["realisateur"] }}{% endif %}
          {% if film["genre"] %} — {{ film["genre"] }}{% endif %}

          {% if film["id_film"] in fav_ids %}
            <form method="post" action="/favorites/remove" style="display:inline;">
              <input type="hidden" name="id_film" value="{{ film['id_film'] }}">
              <button type="submit">Retirer ⭐</button>
            </form>
          {% else %}
            <form method="post" action="/favorites/add" style="display:inline;">
              <input type="hidden" name="id_film" value="{{ film['id_film'] }}">
              <button type="submit">Ajouter ⭐</button>
            </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Aucun film en base.</p>
  {% endif %}

</body>
</html>


